template(name='nav')
    // #topnav.topnav.ui.attached.borderless.big.four.item.menu.hscroll(class=darkmode_class)
        https://fomantic-ui.com/elements/icon.html#/icon
    // #topnav.topnav.ui.attached.borderless.big.menu.hscroll(style="background-color:#{currentUser.theme_color_main}")
    #topnav.topnav.ui.attached.borderless.menu.hscroll
        if is_connected
            // a.icon.item.toggle_leftbar.zoomer
            //     i.large.bars.grey.icon.zoomer
            a.item(href="/" title='goldrun')
                +i name='one-ring'
                // if currentUser.show_labels
                span.mobile.hidden goldrun
            // a.icon.item.fly_right(href="/healthclub" class="{{isActiveRoute 'healthclub'}}" title='healthclub')
            //     // i.large.users.icon
            //     +i name='fitness'
            //     .mobile.hidden healthclub
            a.icon.zoomer.item.fly_right(href="/buildings" class="{{isActiveRoute 'buildings'}}" title='buildings')
                // i.large.exchange.icon
                +i name='apartment'
                span.mobile.hidden buildings
            a.icon.zoomer.item.fly_right(href="/units" class="{{isActiveRoute 'units'}}" title='units')
                // i.large.exchange.icon
                +i name='room'
                span.mobile.hidden units

            a.item.zoomer.fly_right.clear_search(href="/users" class="{{isActiveRoute 'users'}}" title='users')
                +i name='groups'
                // i.large.users.icon
                // if currentUser.show_labels
                span.mobile.hidden people
            a.item.mobile.hidden.zoomer.fly_right.clear_search(href="/checkins" class="{{isActiveRoute 'checkins'}}" title='checkins')
                +i name='checkmark'
                // i.large.users.icon
                // if currentUser.show_labels
                span.mobile.hidden checkins
            a.item.zoomer.fly_right.clear_search(href="/tasks" class="{{isActiveRoute 'tasks'}}" title='checkins')
                +i name='tasks'
                // i.large.users.icon
                // if currentUser.show_labels
                span.mobile.hidden tasks
            if currentUser
                if unread_count
                    a.item(href="/user/#{currentUser.username}/inbox" title='unread messages')
                        // +i name='inbox'
                        i.envelope.icon
                        strong #{unread_count}
                    a.item.zoomer.clear_read(title='mark all read')
                        i.envelope.icon
                        i.remove.icon
        unless subs_ready
            .icon.item
                +i name='one-ring' cl='spinning'
                // i.yin.yang.large.loading.icon
        unless currentUser
            // a.item(href="/register" title='register')
            //     +i name='plus'
            //     span.mobilehidden register            
            a.item(href='/login' title='login' class="{{isActiveRoute 'login'}}" ) 
                i.sign.in.large.green.icon.zoomer
                // +i name='internal'
                span.mobile.hidden login
        unless is_connected
            a.item.zoomer.reconnect
                i.spinner.big.loading.icon
                +i name='disconnected'
                |reconnect
                i.large.circular.refresh.link.icon.zoomer.reconnect(title='reconnect now')
        .right.menu
            if currentUser
                a.fly_up.zoomer.item.tada(href="/user/#{currentUser.username}" class=user_nav_button_class title='profile' class="{{isActiveRoute 'profile'}}" )
                    if currentUser.image_id
                        img.ui.avatar.image(src="{{c.url currentUser.image_id width=300 height=300 gravity='face' crop='fill'}}")
                    else
                        i.user.icon
                    strong #{currentUser.username}
                    |&nbsp;
                // a.icon.item(href="/mail/inbox")


template(name='nav_item')
    a.item.zoomer.fly_right.clear_search.go_route.tada.mobile.hidden(href="/#{key}s" class="{{nav_item_class key}}" title=key)
        +i name=icon
        // i.large.icon(class=icon)
        if currentUser.show_labels
            span.mobile.hidden #{key}s

       
template(name='footer')
    .ui.fluid.segment.stackable.grid.alpha
        .two.column.row
            .column
                // .ui.accordion
                //     .title.zoomer
                //         .ui.small.inline.header 
                //             |goldrun is community supported and will never sell your info
                //         // i.dropdown.grey.icon
                //     .content
                //         img.ui.image(src="{{c.url 'dao_venmo'}}")
                // +music
                if currentUser.admin
                    with currentUser
                        +boolean_edit key='admin_mode' label='admin mode' icon='shield'
                        
                if currentUser.admin_mode
                    .ui.inline.header 
                        i.blog.icon
                        | #{all_docs.count}
                        |docs
                    each all_docs 
                        .ui.image.label 
                            img.ui.image(src="{{c.url image_id width=300 height=300 gravity='face' crop='fill'}}")
                            |#{title}
                            +model_label
                            |#{building_number}
                            +print_this
                            |#{when}
            // if currentUser.admin_mode
            .column
                .ui.inline.header 
                    i.chess.icon
                    |#{result_docs.count}
                    |results
                each result_docs 
                    .ui.label #{name}: #{count} [#{model}]
                .ui.inline.header 
                    i.users.icon
                    |#{all_users.count}
                    |users
                each all_users
                    .ui.label 
                        a(href="/user/#{username}") 
                            img.ui.avatar.image(src="{{c.url image_id width=300 height=300 gravity='face' crop='fill'}}")
                            |#{username}
                            
                        +print_this
            
                
